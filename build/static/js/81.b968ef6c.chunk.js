(this["webpackJsonpo-terrain"]=this["webpackJsonpo-terrain"]||[]).push([[81],{1453:function(e,s,a){"use strict";a.r(s);var t=a(159),l=a(160),c=a(164),n=a(162),o=a(161),i=a(1),r=a(648),d=a(807),m=a(808),h=a(717),j=a(831),u=a(665),p=a(660),b=a.n(p),O=a(686),x=a(691),v=a(647),g=a(785),N=a.n(g),f=a(706),C=a(21),k=a(2),y=function(e){Object(n.a)(a,e);var s=Object(o.a)(a);function a(e){var l;return Object(t.a)(this,a),(l=s.call(this,e)).handleAddUser=function(){JSON.parse(localStorage.getItem("token_auth"));var e={username:b()("#email").val(),nom:b()("#nom").val(),prenom:b()("#prenom").val(),email:b()("#email").val(),roles:l.state.role,adresse:b()("#adresse").val(),telephone:b()("#telephone").val(),password:b()("#password").val(),naissance:l.state.date,numeroId:b()("#numeroId").val(),typeId:l.state.document_id,monToken:" ",resetPasswordToken:" ",userDelete:!1,terrains:null,reservations:null},s=document.getElementById("checkCGU");console.log("checkbox",s.checked);var a=""==e.nom||""==e.prenom||""==e.email||""==e.telephone||""==e.password,t={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)};a?(l.setState({message:"Veuillez renseigner les champs obligatoires."}),b()("#echec").css("display","block")):b()("#password").val()!=b()("#password2").val()||""==b()("#password2").val()?(l.setState({message:"Veuillez renseigner des mots de passe identique."}),b()("#echec").css("display","block")):fetch(v.a.url+"user/register",t).then((function(e){return e.json()})).then((function(e){console.log("okkk====>",e);try{!0===e?(alert("Votre compte a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s."),l.setState({message2:"Votre compte a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s."}),b()("#success").css("display","block"),l.setState({ok:Object(k.jsx)(C.a,{to:"/login"})})):(l.setState({message:"Ce compte existe d\xe9j\xe0, veuillez renseigner une autre adresse email."}),b()("#echec").css("display","block"))}catch(s){l.setState({message:"Ce compte existe d\xe9j\xe0, veuillez renseigner une autre adresse email."}),b()("#echec").css("display","block"),l.setState({ok:Object(k.jsx)(C.a,{to:"/register"})})}}))},l.handleDate=function(e){0!=e.length&&l.setState({date:e[0]})},l.handleChangeDocument=function(e){console.log("adate =====>",e);try{l.setState({document_id:e.label})}catch(s){}},l.handleNom=function(e){console.log(e.target.value);try{e.target.value?b()("#nom").removeClass("is-invalid"):b()("#nom").addClass("is-invalid")}catch(s){b()("#nom").addClass("is-invalid")}},l.handlePrenom=function(e){console.log(e.target.value);try{e.target.value?b()("#prenom").removeClass("is-invalid"):b()("#prenom").addClass("is-invalid")}catch(s){b()("#prenom").addClass("is-invalid")}},l.handleEmail=function(e){try{e.target.value?b()("#email").removeClass("is-invalid"):b()("#email").addClass("is-invalid")}catch(s){b()("#email").addClass("is-invalid")}},l.handleMDP1=function(e){try{e.target.value?b()("#password").removeClass("is-invalid"):b()("#password").addClass("is-invalid")}catch(s){b()("#password").addClass("is-invalid")}},l.handleMDP2=function(e){try{e.target.value?b()("#password2").removeClass("is-invalid"):b()("#password2").addClass("is-invalid")}catch(s){b()("#password2").addClass("is-invalid")}},l.handleTelephone=function(e){console.log(e.target.value);try{e.target.value?b()("#telephone").removeClass("is-invalid"):b()("#telephone").addClass("is-invalid")}catch(s){b()("#telephone").addClass("is-invalid")}},l.handleRetourAcccueil=function(){l.setState({ok:Object(k.jsx)(C.a,{to:"/accueil-visiteur"})})},l.state={role:{},role_id:{},role_option:{},document:[{value:"CARTE D'IDENTE",label:"CARTE D'IDENTE"},{value:"PASSPORT",label:"PASSPORT"}],document_id:"",ok:"",date:"",message:"Confirmation mot de passe non conforme !",message2:""},l.handleChangeDocument.bind(Object(c.a)(l)),l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;new Headers,JSON.parse(localStorage.getItem("token_auth"));b()("#echec").css("display","none"),b()("#success").css("display","none");fetch(v.a.url+"user/role/roles",{method:"GET"}).then((function(e){return e.json()})).then((function(s){console.log("okkk====>",s);try{s.length?s.map((function(s){"VISITEUR"==s.libelle&&e.setState({role:s})})):e.setState({role:{}})}catch(a){e.setState({role:{}})}}))}},{key:"render",value:function(){var e=this.state.pick,s=Object(x.a)();return Object(k.jsx)("div",{className:"c-app c-default-layout flex-row align-items-center mt-4",children:Object(k.jsxs)(r.h,{children:[Object(k.jsxs)("button",{onClick:this.handleRetourAcccueil,className:"btn btn-success mb-5",children:[" ",Object(k.jsx)("i",{class:"bx bxs-home-smile"}),"  Retour"]}),Object(k.jsx)(r.z,{className:"justify-content-center",children:Object(k.jsx)(r.g,{md:"12",lg:"10",xl:"9",children:Object(k.jsx)(r.e,{className:"mx-4",children:Object(k.jsx)(r.f,{className:"p-4",children:Object(k.jsxs)(r.o,{children:[Object(k.jsx)("h1",{children:"Inscrivez-vous"}),this.state.ok,Object(k.jsxs)(d.a,{children:[Object(k.jsxs)(m.a,{md:"6",className:"mt-2",children:[Object(k.jsx)("small",{children:"Nom *"}),Object(k.jsx)(h.a,{className:"form-control ",type:"text",id:"nom",placeholder:"Nom",onChange:this.handleNom})]}),Object(k.jsxs)(m.a,{md:"6",className:"mt-2",children:[Object(k.jsx)("small",{children:"Pr\xe9nom(s) *"}),Object(k.jsx)(h.a,{className:"form-control",type:"text",id:"prenom",onChange:this.handlePrenom,placeholder:"Pr\xe9nom (s)"})]})]}),Object(k.jsxs)(d.a,{className:"mt-4",children:[Object(k.jsxs)(m.a,{md:"6",className:"mt-2",children:[Object(k.jsx)("small",{children:"Adresse"}),Object(k.jsx)(h.a,{className:"form-control",type:"text",id:"adresse",placeholder:"Adresse"})]}),Object(k.jsxs)(m.a,{md:"6",className:"mt-2",children:[Object(k.jsx)("small",{children:"Email *"}),Object(k.jsx)(h.a,{className:"form-control",type:"text",id:"email",onChange:this.handleEmail,placeholder:"Email"})]})]}),Object(k.jsxs)(d.a,{className:"mt-4",children:[Object(k.jsxs)(m.a,{md:"6",className:"mt-2",children:[Object(k.jsx)("small",{children:"Num\xe9ro de t\xe9l\xe9phone *"}),Object(k.jsx)(h.a,{className:"form-control ",onChange:this.handleTelephone,type:"text",id:"telephone",placeholder:"Num\xe9ro de t\xe9l\xe9phone"})]}),Object(k.jsxs)(m.a,{md:"6",className:"mt-2",children:[Object(k.jsx)("small",{children:"Date de naissance"}),Object(k.jsxs)("div",{className:"docs-datepicker",children:[Object(k.jsxs)(j.a,{children:[Object(k.jsx)(N.a,{value:e,className:"form-control d-block",placeholder:"Choisissez la date de naissance",options:{locale:f.French,altInput:!0,altFormat:"d/M/Y"},onChange:this.handleDate}),Object(k.jsx)("div",{className:"input-group-append",children:Object(k.jsx)("button",{type:"button",className:"btn btn-outline-secondary docs-datepicker-trigger",disabled:!0,children:Object(k.jsx)("i",{className:"fa fa-calendar","aria-hidden":"true"})})})]}),Object(k.jsx)("div",{className:"docs-datepicker-container"})]})]})]}),Object(k.jsxs)(d.a,{className:"mt-4 mb-3",children:[Object(k.jsxs)(m.a,{md:"6",className:"mt-2",children:[Object(k.jsx)("small",{children:"Type de document d'identit\xe9"}),Object(k.jsx)(O.a,{closeMenuOnSelect:!0,components:s,onChange:this.handleChangeDocument,options:this.state.document,placeholder:"Choisir le document"})]}),Object(k.jsxs)(m.a,{md:"6",className:"mt-2",children:[Object(k.jsx)("small",{children:"Num\xe9ro d'identit\xe9"}),Object(k.jsx)(h.a,{className:"form-control",type:"text",id:"numeroId",placeholder:"Num\xe9ro d'identit\xe9"})]})]}),Object(k.jsxs)("div",{class:"form-check",children:[Object(k.jsx)("input",{class:"form-check-input",checked:"true",required:!0,type:"checkbox",value:"",id:"checkCGU"}),Object(k.jsxs)("label",{class:"form-check-label",for:"flexCheckDefault",children:["J'accepte les ",Object(k.jsx)("a",{href:"/#/cgu",children:Object(k.jsx)("u",{children:"Conditions g\xe9n\xe9rales d'utilisation de O-Terrain "})}),"."]})]}),Object(k.jsxs)(d.a,{className:"mt-4 mb-4",children:[Object(k.jsxs)(m.a,{md:"6",className:"mt-2",children:[Object(k.jsx)("small",{children:"Mot de passe *"}),Object(k.jsxs)(r.u,{className:"mb-3",children:[Object(k.jsx)(r.v,{children:Object(k.jsx)(r.w,{children:Object(k.jsx)(u.a,{name:"cil-lock-locked"})})}),Object(k.jsx)(r.t,{type:"password",className:"form-control ",id:"password",placeholder:"Mot de passe",autoComplete:"new-password",onChange:this.handleMDP1})]})]}),Object(k.jsxs)(m.a,{md:"6",className:"mt-2",children:[Object(k.jsx)("small",{children:"R\xe9petez le mot de passe *"}),Object(k.jsxs)(r.u,{className:"mb-4",children:[Object(k.jsx)(r.v,{children:Object(k.jsx)(r.w,{children:Object(k.jsx)(u.a,{name:"cil-lock-locked"})})}),Object(k.jsx)(r.t,{type:"password",className:"form-control ",id:"password2",placeholder:"R\xe9p\xe9tez le mot de passe",onChange:this.handleMDP2})]})]})]}),Object(k.jsx)(d.a,{className:"mt-4",children:Object(k.jsx)(m.a,{md:"12",children:Object(k.jsx)("div",{style:{textAlign:"center"},id:"success",class:"alert alert-success",role:"alert",children:this.state.message2})})}),Object(k.jsx)(d.a,{className:"mt-4",children:Object(k.jsx)(m.a,{md:"12",children:Object(k.jsx)("div",{style:{textAlign:"center"},id:"echec",class:"alert alert-danger",role:"alert",children:this.state.message})})}),Object(k.jsx)(r.d,{color:"success",type:"submit",onClick:this.handleAddUser,block:!0,children:"Cr\xe9er mon compte"})]})})})})})]})})}}]),a}(i.Component);s.default=y},647:function(e,s,a){"use strict";s.a={type_tournoi:{TOURNOI_INTER_ECOLE:"TOURNOI_INTER_ECOLE",TOURNOI_INTER_ENTREPRISE:"TOURNOI_INTER_ENTREPRISE"},url:"https://o-terrain.com/"}}}]);
//# sourceMappingURL=81.b968ef6c.chunk.js.map